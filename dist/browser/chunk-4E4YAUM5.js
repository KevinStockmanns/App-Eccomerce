import{a as J}from"./chunk-JTOH4IOW.js";import{a as Y}from"./chunk-WYGNNODF.js";import{a as V,b as m,c as k,d as D,e as $,g as R,i as j,j as z,k as B,l as G,n as H,o as U}from"./chunk-ZVN7DDCF.js";import"./chunk-E42GPLRZ.js";import{a as Z}from"./chunk-RR3A66G7.js";import{b as A}from"./chunk-NMAY4UGY.js";import{h as I}from"./chunk-BC2EWL22.js";import{$a as g,Bb as N,Ja as n,Ka as E,O as q,T as y,Xa as s,Z as w,Za as b,bb as c,cb as L,db as S,eb as O,fb as t,gb as i,hb as u,mb as F,nb as f,vb as a,wb as P,xb as v,z as M}from"./chunk-LPK2HR6M.js";var K=(()=>{let r=class r{constructor(d){this.http=d,this.URL_GEOREF="https://apis.datos.gob.ar/georef/api"}getProvincias(){return this.http.get(`${this.URL_GEOREF}/provincias?max=30`)}getLocalidades(d){return this.http.get(`${this.URL_GEOREF}/municipios?max=100&provincia=${d}`)}};r.\u0275fac=function(p){return new(p||r)(y(I))},r.\u0275prov=q({token:r,factory:r.\u0275fac,providedIn:"root"});let e=r;return e})();var Q=(e,r)=>r.id;function ee(e,r){e&1&&(t(0,"p",7),a(1,"El nombre es requerido"),i())}function te(e,r){e&1&&(t(0,"p",7),a(1,"El nombre solo acepta letras y espacios en blanco"),i())}function ie(e,r){if(e&1&&(t(0,"p",7),a(1),i()),e&2){let l,d=f();n(),v("El nombre acepta hasta ",(l=(l=d.getError("nombre","maxlength"))==null?null:l.requiredLength)!==null&&l!==void 0?l:0," caracteres")}}function ne(e,r){if(e&1&&(t(0,"p",7),a(1),i()),e&2){let l,d=f();n(),v("El nombre requiere al menos ",(l=d.getError("nombre","minlength"))==null?null:l.requiredLength," caracteres")}}function oe(e,r){e&1&&(t(0,"p",7),a(1,"El apellido es requerido"),i())}function re(e,r){e&1&&(t(0,"p",7),a(1,"El apellido solo acepta letras y espacios en blanco"),i())}function ae(e,r){if(e&1&&(t(0,"p",7),a(1),i()),e&2){let l=f();n(),v("El apellido acepta hasta ",l.getError("apellido","maxlength").requiredLength," caracteres")}}function le(e,r){if(e&1&&(t(0,"p",7),a(1),i()),e&2){let l=f();n(),v("El apellido requiere ",l.getError("apellido","minlength").requiredLength," caracteres")}}function de(e,r){e&1&&(t(0,"p",7),a(1,"El correo es requerido"),i())}function ce(e,r){e&1&&(t(0,"p",7),a(1,"El formato del correo es inv\xE1lido"),i())}function me(e,r){e&1&&(t(0,"p",7),a(1,"El telefono es requerido"),i())}function pe(e,r){e&1&&(t(0,"p",7),a(1,"El formato del telefono es +00 0000 000000"),i())}function se(e,r){e&1&&(t(0,"p",7),a(1,"La clave es requerida"),i())}function ue(e,r){e&1&&(t(0,"p",7),a(1,"La clave acepta letras, numeros y caracteres especiales(_ -)"),i())}function ge(e,r){if(e&1&&(t(0,"p",7),a(1),i()),e&2){let l=f();n(),v("La clave debe tener hasta ",l.getError("clave","maxlength").requiredLength," caracteres")}}function fe(e,r){if(e&1&&(t(0,"p",7),a(1),i()),e&2){let l=f();n(),v("La clave debe tener al menos ",l.getError("clave","minlength").requiredLength," caracteres")}}function ve(e,r){e&1&&(t(0,"p",7),a(1,"La clave es requerida"),i())}function he(e,r){e&1&&(t(0,"p",7),a(1,"La clave acepta letras, numeros y caracteres especiales(_ -)"),i())}function _e(e,r){if(e&1&&(t(0,"p",7),a(1),i()),e&2){let l=f();n(),v("La clave debe tener hasta ",l.getError("clave2","maxlength").requiredLength," caracteres")}}function Ce(e,r){if(e&1&&(t(0,"p",7),a(1),i()),e&2){let l=f();n(),v("La clave debe tener al menos ",l.getError("clave2","minlength").requiredLength," caracteres")}}function Ee(e,r){e&1&&(t(0,"p",7),a(1,"Las claves deben ser iguales"),i())}function xe(e,r){e&1&&(t(0,"p",7),a(1,"La fecha de nacimiento es requerida"),i())}function be(e,r){if(e&1&&(t(0,"p",7),a(1),i()),e&2){let l=f();n(),v("Debes tener ",l.getError("fechaNacimiento","underage").requiredAge," a\xF1os o m\xE1s")}}function Se(e,r){e&1&&(t(0,"p",7),a(1,"El pa\xEDs es requerido."),i())}function Oe(e,r){if(e&1&&(t(0,"option",29),a(1),i()),e&2){let l=r.$implicit;b("value",l.nombre),n(),P(l.nombre)}}function Pe(e,r){if(e&1&&(t(0,"select",23),S(1,Oe,2,2,"option",null,Q),i()),e&2){let l=f();n(),O(l.provincias)}}function Te(e,r){e&1&&u(0,"input",30)}function Me(e,r){e&1&&(t(0,"p",7),a(1,"La provincia es requerida."),i())}function qe(e,r){if(e&1&&(t(0,"option",29),a(1),i()),e&2){let l=r.$implicit;b("value",l.nombre),n(),P(l.nombre)}}function ye(e,r){if(e&1&&(t(0,"select",31),S(1,qe,2,2,"option",null,Q),i()),e&2){let l=f(2);n(),O(l.localidades)}}function we(e,r){e&1&&u(0,"input",37)}function Le(e,r){e&1&&(t(0,"p",7),a(1,"La localidad es requerida."),i())}function Fe(e,r){e&1&&(t(0,"p",7),a(1,"El barrio es requerido."),i())}function Ne(e,r){e&1&&(t(0,"p",7),a(1,"La direcci\xF3n es requerida."),i())}function Ie(e,r){if(e&1&&(t(0,"div",3)(1,"div",4),s(2,ye,3,0,"select",31)(3,we,1,0),t(4,"label",32),a(5,"Localidad"),i()(),s(6,Le,2,0,"p",7),i(),t(7,"div",3)(8,"div",4),u(9,"input",33),t(10,"label",34),a(11,"Barrio"),i()(),s(12,Fe,2,0,"p",7),i(),t(13,"div",3)(14,"div",4),u(15,"input",35),t(16,"label",36),a(17,"Direcci\xF3n"),i()(),s(18,Ne,2,0,"p",7),i()),e&2){let l=f();n(),g("withText",l.hasValue("localidad"))("error",l.hasOneError("localidad")),n(),c(2,l.localidades.length>0?2:3),n(4),c(6,l.hasError("localidad","required")?6:-1),n(2),g("withText",l.hasValue("barrio"))("error",l.hasOneError("barrio")),n(4),c(12,l.hasError("barrio","required")?12:-1),n(2),g("withText",l.hasValue("direccion"))("error",l.hasOneError("direccion")),n(4),c(18,l.hasError("direccion","required")?18:-1)}}function Ae(e,r){e&1&&(t(0,"span"),a(1,"Registrarme"),i())}function Ve(e,r){e&1&&u(0,"div",38)}function ke(e,r){if(e&1&&(t(0,"p",27),a(1),i()),e&2){let l=r.$implicit;n(),P(l.error)}}var Ue=(()=>{let r=class r{constructor(d,p,o,_){this.formBuilder=d,this.usuarioService=p,this.ubicacionService=o,this.notification=_,this.isInRegister=!1,this.loading=!1,this.error=[],this.provincias=[],this.localidades=[],this.signupForm=this.formBuilder.group({nombre:["",[m.required,m.pattern("[a-zA-Z\xF1\xD1\xE1\xE9\xED\xF3\xFA\xC1\xC9\xCD\xD3\xDA\\s]+"),m.minLength(4),m.maxLength(50)]],apellido:["",[m.required,m.pattern("[a-zA-Z\xF1\xD1\xE1\xE9\xED\xF3\xFA\xC1\xC9\xCD\xD3\xDA\\s]+"),m.minLength(3),m.maxLength(70)]],correo:["",[m.required,m.email]],telefono:["",[m.required,m.pattern("(\\+\\d{2,4})?\\s?\\d{3,4}\\s\\d{6,8}")]],clave:["",[m.required,m.pattern("[a-zA-Z\\d\\_\\-]+"),m.minLength(8),m.maxLength(20)]],clave2:["",[m.required,m.pattern("[a-zA-Z\\d\\_\\-]+"),m.minLength(8),m.maxLength(20),this.validarClave]],fechaNacimiento:["",[m.required,this.isAdult]],pais:["Argentina",[m.required]],provincia:["",[m.required]],localidad:["",[m.required]],barrio:["",[m.required]],direccion:["",[m.required]]}),this.ubicacionService.getProvincias().subscribe({next:h=>{this.provincias=h.provincias.sort((x,C)=>x.nombre<C.nombre?-1:x.nombre>C.nombre?1:0)}}),this.signupForm.get("provincia")?.valueChanges.pipe(M(500)).subscribe({next:h=>{console.log(h),h?o.getLocalidades(h).subscribe(x=>{this.localidades=x.municipios.sort((C,T)=>C.nombre<T.nombre?-1:C.nombre>T.nombre?1:0)}):this.localidades=[]}})}onSubmit(){if(this.signupForm.valid){this.loading=!0;let d=this.signupForm.value;delete d.clave2,d.ubicacion=`${d.pais}/-/${d.provincia}/-/${d.localidad}/-/${d.barrio}/-/${d.direccion}`,delete d.pais,delete d.provincia,delete d.localidad,delete d.barrio,delete d.direccion,this.usuarioService.signup(d).subscribe({error:p=>{this.error=p.error.errors,this.loading=!1},next:p=>{this.error=[],this.loading=!1}})}else this.signupForm.markAllAsTouched()}isAdult(d){let p=new Date,o=new Date(d.value);o.setMinutes(o.getTimezoneOffset());let _=p.getFullYear()-o.getFullYear(),h=p.getMonth()-o.getMonth();return(h<0||h==0&&p.getDate()<o.getDate())&&_--,_<18?{underage:{requiredAge:18}}:null}validarClave(d){return d?.parent?.get("clave")?.value===d?.parent?.get("clave2")?.value?null:{repeatClave:!0}}hasValue(d){return this.signupForm.get(d)?.value}hasError(d,p){return this.signupForm.get(d)?.hasError(p)&&this.signupForm.get(d)?.touched}getError(d,p){return(this.signupForm.get(d)?.errors)[p]}hasOneError(d){return!this.signupForm.get(d)?.valid&&this.signupForm.get(d)?.touched}wasTouched(d){return this.signupForm.get(d)?.touched}};r.\u0275fac=function(p){return new(p||r)(E(H),E(A),E(K),E(Z))},r.\u0275cmp=w({type:r,selectors:[["app-signup"]],standalone:!0,features:[N],decls:86,vars:65,consts:[[1,"main","content"],[1,"signup-content","box-shadow",2,"view-transition-name","login-signup-view"],[3,"submit","formGroup"],[1,"form-div"],[1,"form-div-input"],["type","text","id","nombre","formControlName","nombre"],["for","nombre"],[1,"form-div-error"],["type","text","id","apellido","formControlName","apellido"],["for","apellido"],[1,"form-div","col-2"],["type","email","id","correo","formControlName","correo"],["for","correo"],["type","tel","id","telefono","formControlName","telefono"],["for","telefono"],["type","password","id","clave","autocomplete","off","formControlName","clave"],["for","clave"],["type","password","id","clave2","autocomplete","off","formControlName","clave2"],["for","clave2"],["type","date","id","fechaNacimiento","formControlName","fechaNacimiento"],["for","fechaNacimiento"],["type","text","id","pais","formControlName","pais","title","Por el momento solo se realizan pedidos en Argentina."],["for","pais"],["formControlName","provincia","id","provincia"],["for","provincia"],[1,"form-submit","col-2"],["type","submit",1,"btn","btn-primary"],[1,"form-div-error",2,"text-align","center"],[1,"beneficios-usuarios-content","box-shadow"],[3,"value"],["type","text","id","provincia","formControlName","provincia"],["formControlName","localidad","id","localidad"],["for","localidad"],["type","text","id","barrio","formControlName","barrio"],["for","barrio"],["type","text","id","direccion","formControlName","direccion"],["for","direccion"],["type","text","id","localidad","formControlName","localidad"],[1,"loader"]],template:function(p,o){p&1&&(u(0,"back-btn"),t(1,"main",0)(2,"section",1)(3,"h1"),a(4,"\xA1Registrate Ahora!"),i(),t(5,"form",2),F("submit",function(){return o.onSubmit()}),t(6,"div",3)(7,"div",4),u(8,"input",5),t(9,"label",6),a(10,"Nombre"),i()(),s(11,ee,2,0,"p",7)(12,te,2,0,"p",7)(13,ie,2,1,"p",7)(14,ne,2,1,"p",7),i(),t(15,"div",3)(16,"div",4),u(17,"input",8),t(18,"label",9),a(19,"Apellido"),i()(),s(20,oe,2,0,"p",7)(21,re,2,0,"p",7)(22,ae,2,1,"p",7)(23,le,2,1,"p",7),i(),t(24,"div",10)(25,"div",4),u(26,"input",11),t(27,"label",12),a(28,"Correo"),i()(),s(29,de,2,0,"p",7)(30,ce,2,0,"p",7),i(),t(31,"div",10)(32,"div",4),u(33,"input",13),t(34,"label",14),a(35,"Telefono"),i()(),s(36,me,2,0,"p",7)(37,pe,2,0,"p",7),i(),t(38,"div",3)(39,"div",4),u(40,"input",15),t(41,"label",16),a(42,"Clave"),i()(),s(43,se,2,0,"p",7)(44,ue,2,0,"p",7)(45,ge,2,1,"p",7)(46,fe,2,1,"p",7),i(),t(47,"div",3)(48,"div",4),u(49,"input",17),t(50,"label",18),a(51,"Repetir clave"),i()(),s(52,ve,2,0,"p",7)(53,he,2,0,"p",7)(54,_e,2,1,"p",7)(55,Ce,2,1,"p",7)(56,Ee,2,0,"p",7),i(),t(57,"div",3)(58,"div",4),u(59,"input",19),t(60,"label",20),a(61,"Fecha de nacimiento"),i()(),s(62,xe,2,0,"p",7)(63,be,2,1,"p",7),i(),t(64,"div",3)(65,"div",4),u(66,"input",21),t(67,"label",22),a(68,"Pa\xEDs"),i()(),s(69,Se,2,0,"p",7),i(),t(70,"div",3)(71,"div",4),s(72,Pe,3,0,"select",23)(73,Te,1,0),t(74,"label",24),a(75,"Provincia"),i()(),s(76,Me,2,0,"p",7),i(),s(77,Ie,19,16),t(78,"div",25)(79,"button",26),s(80,Ae,2,0,"span")(81,Ve,1,0),i(),S(82,ke,2,1,"p",27,L),i()()(),t(84,"section",28),u(85,"usuario-beneficios"),i()()),p&2&&(n(5),b("formGroup",o.signupForm),n(2),g("withText",o.hasValue("nombre"))("error",o.hasOneError("nombre")),n(4),c(11,o.hasError("nombre","required")?11:-1),n(),c(12,o.hasError("nombre","pattern")?12:-1),n(),c(13,o.hasError("nombre","maxlength")?13:-1),n(),c(14,o.hasError("nombre","minlength")?14:-1),n(2),g("withText",o.hasValue("apellido"))("error",o.hasOneError("apellido")),n(4),c(20,o.hasError("apellido","required")?20:-1),n(),c(21,o.hasError("apellido","pattern")?21:-1),n(),c(22,o.hasError("apellido","maxlength")?22:-1),n(),c(23,o.hasError("apellido","minlength")?23:-1),n(2),g("withText",o.hasValue("correo"))("error",o.hasOneError("correo")),n(4),c(29,o.hasError("correo","required")?29:-1),n(),c(30,o.hasError("correo","email")?30:-1),n(2),g("withText",o.hasValue("telefono"))("error",o.hasOneError("telefono")),n(4),c(36,o.hasError("telefono","required")?36:-1),n(),c(37,o.hasError("telefono","pattern")?37:-1),n(2),g("withText",o.hasValue("clave"))("error",o.hasOneError("clave")),n(4),c(43,o.hasError("clave","required")?43:-1),n(),c(44,o.hasError("clave","pattern")?44:-1),n(),c(45,o.hasError("clave","maxlength")?45:-1),n(),c(46,o.hasError("clave","minlength")?46:-1),n(2),g("withText",o.hasValue("clave2"))("error",o.hasOneError("clave2")),n(4),c(52,o.hasError("clave2","required")?52:-1),n(),c(53,o.hasError("clave2","pattern")?53:-1),n(),c(54,o.hasError("clave2","maxlength")?54:-1),n(),c(55,o.hasError("clave2","minlength")?55:-1),n(),c(56,o.hasError("clave2","repeatClave")?56:-1),n(2),g("withText",o.hasValue("fechaNacimiento"))("error",o.hasOneError("fechaNacimiento")),n(4),c(62,o.hasError("fechaNacimiento","required")?62:-1),n(),c(63,o.hasError("fechaNacimiento","underage")?63:-1),n(2),g("withText",o.hasValue("pais"))("error",o.hasOneError("pais")),n(4),c(69,o.hasError("pais","required")?69:-1),n(2),g("withText",o.hasValue("provincia"))("error",o.hasOneError("provincia")),n(),c(72,o.provincias.length>0?72:73),n(4),c(76,o.hasError("provincia","required")?76:-1),n(),c(77,o.localidades.length>0||o.wasTouched("provincia")?77:-1),n(3),c(80,o.loading?81:80),n(2),O(o.error))},dependencies:[U,$,B,G,V,z,k,D,R,j,Y,J],styles:["main[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-height:calc(100vh - (var(--headerHeight) * 2));padding-bottom:1rem}main[_ngcontent-%COMP%] > section[_ngcontent-%COMP%]{padding:1rem .5rem}.signup-content[_ngcontent-%COMP%]{display:grid;align-content:center;gap:1rem;border-radius:var(--borderrHigh) var(--borderrHigh) 0 0;background-color:var(--bgCardColor)}.beneficios-usuarios-content[_ngcontent-%COMP%]{border-radius:0 0 var(--borderrHigh) var(--borderrHigh);background-color:var(--mainColorBack)}.signup-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{text-align:center}form[_ngcontent-%COMP%]{display:grid;gap:1rem}.form-div-input[_ngcontent-%COMP%]{position:relative;padding:.3rem .5rem;border:2px solid var(--mainColor);border-radius:var(--borderrLow);transition:var(--transitionFast) ease}.form-div-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-div-input[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;height:100%;outline:none;border:none;font-size:1rem;font-family:inherit;background-color:inherit}.form-div-input[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{position:absolute;top:.4rem;left:.5rem;font-weight:700;pointer-events:none;color:var(--textAlphaColor);transition:var(--transitionFast)}.form-div-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus ~ label[_ngcontent-%COMP%], .form-div-input.withText[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.8rem;top:-.6rem;padding:0 .3rem;background-color:var(--bgCardColor);border-radius:var(--borderrLow)}.form-div-input[_ngcontent-%COMP%]:not(.error)   input[_ngcontent-%COMP%]:focus ~ label[_ngcontent-%COMP%], .form-div-input.withText[_ngcontent-%COMP%]:not(.error)   label[_ngcontent-%COMP%]{color:var(--mainColor)}.form-div-input.error[_ngcontent-%COMP%]{border-color:var(--errorColor)}.form-div-input.error[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:var(--errorColor)}.form-div-error[_ngcontent-%COMP%]{font-size:.8rem;font-weight:700;color:var(--errorColor)}.form-submit[_ngcontent-%COMP%]{display:flex;flex-direction:column}.form-submit[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:grid;place-items:center;min-width:200px;align-self:center}.form-submit[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.loader[_ngcontent-%COMP%]{width:1.5rem;height:1.5rem;border-radius:50%;border:3px solid transparent;border-top:3px solid var(--bgCardColor);animation:_ngcontent-%COMP%_rotate 1s ease-in-out infinite}@keyframes _ngcontent-%COMP%_rotate{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@media screen and (min-width: 600px){main[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:1rem}main[_ngcontent-%COMP%] > section[_ngcontent-%COMP%]{border-radius:var(--borderrHigh)}.beneficios-usuarios-content[_ngcontent-%COMP%]{display:grid;place-items:center}}@media screen and (min-width:800px){main[_ngcontent-%COMP%]{grid-template-columns:2fr 1fr}form[_ngcontent-%COMP%]{grid-template-columns:1fr 1fr;grid-auto-rows:min-content}form[_ngcontent-%COMP%]   .col-2[_ngcontent-%COMP%]{grid-column:1 / 3}}"]});let e=r;return e})();export{Ue as SignupComponent};
