import{g as p}from"./chunk-BC2EWL22.js";import{L as u,l as f}from"./chunk-LPK2HR6M.js";var n=new Map,g=(e,o)=>{if(I(e.urlWithParams,e.method)){let s=e.urlWithParams+localStorage.getItem("userToken"),r=n.get(s);return r&&m(r.timestamp)?f(new p({body:r.response})):o(e).pipe(u(t=>{t instanceof p&&n.set(s,{response:t.body,timestamp:Date.now()})}))}return o(e)};function m(e){return Date.now()-e<18e5}function I(e,o){if(o!=="GET")return!1;let s=["/api/v1/producto","/api/v1/pedido","/georef/api/provincias","/georef/api/municipios"],t=new URL(e).pathname;return s.find(c=>c===t)!==void 0}function E(e,o){let s=localStorage.getItem("userToken");n.forEach((r,t)=>{if(t.includes(`/${o}`)&&t.endsWith(s)){let c=h(t,e.id);if(c!==-1){let i=n.get(t);i&&i.response.body.content&&(i.response.body.content[c]=e,n.set(t,i))}}})}function h(e,o){return(n.get(e)?.response.body.content).findIndex(r=>r.id==o)}function v(e,o,s){n.forEach((r,t)=>{if(t.includes(e)){let c=h(t,s.id),i=n.get(t);c!==-1&&i?.response.body.content&&(i.response.body.content=i.response.body.content.filter(l=>l.id!==s.id),n.set(t,i),console.log("Se elimino de donde estaba"),n.forEach((l,d)=>{if(d.includes(o)){let a=n.get(d);a&&a.response.body.content&&(a.response.body.content.push(s),n.set(d,a),console.log("Se cambio donde corresponde"))}}))}})}export{g as a,E as b,v as c};
