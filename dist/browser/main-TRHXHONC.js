import{a as Vt,b as Lt}from"./chunk-E6WQJSIC.js";import{b as X}from"./chunk-YPRR3QM6.js";import"./chunk-ZVN7DDCF.js";import{a as N,b as U,c as Mt,e as Et,f as yt,g as At,i as Ot,k as wt,n as kt,o as It,p as Tt,r as Ft}from"./chunk-E42GPLRZ.js";import{a as Dt,c as it}from"./chunk-AC3WT4O5.js";import{a as K}from"./chunk-MD5CZJF7.js";import{a as Q}from"./chunk-DGK2EHOG.js";import{a as E}from"./chunk-RR3A66G7.js";import{a as J,b as h}from"./chunk-NMAY4UGY.js";import{c as Y,d as Z,e as ft,i as vt,j as Ct,k as gt,n as _t,p as ht,q as D,r as j,s as Pt,t as xt,u as bt,v as B,x as St}from"./chunk-BC2EWL22.js";import{$a as x,Bb as M,Cb as F,Db as V,Ea as st,Ga as dt,Ja as l,Ka as f,U as b,Xa as C,Z as S,Za as g,ab as pt,bb as u,cb as G,db as I,eb as T,fa as W,fb as a,ga as y,gb as c,ha as A,hb as d,ib as O,j as rt,m as at,mb as _,na as lt,nb as p,qb as mt,vb as s,wb as w,x as ct,xb as m,yb as ut}from"./chunk-LPK2HR6M.js";function Zt(t,o){if(t&1&&(a(0,"h2"),s(1,"Informaci\xF3n de usuario"),c(),a(2,"p"),s(3),c(),a(4,"p"),s(5),c(),a(6,"p"),s(7),c(),a(8,"p"),s(9),c(),a(10,"p"),s(11),c(),a(12,"p"),s(13),c(),a(14,"p"),s(15),c(),a(16,"p"),s(17),c(),a(18,"p"),s(19),c(),a(20,"p"),s(21),c()),t&2){let e,r,i,n,v,P,L,z,$,et,k=p();l(3),m("Nombre comleto: ",((e=k.usuario())==null?null:e.apellido)+" "+((e=k.usuario())==null?null:e.nombre),""),l(2),m("Correo: ",(r=k.usuario())==null?null:r.correo,""),l(2),m("Telefono: ",(i=k.usuario())==null?null:i.telefono,""),l(2),m("Fecha de nacimiento: ",(n=k.usuario())==null?null:n.fechaNacimiento,""),l(2),m("Rol: ",(v=k.usuario())==null?null:v.rol,""),l(2),m("Pa\xEDs: ",(P=k.usuario())==null||P.ubicacion==null?null:P.ubicacion.pais,""),l(2),m("Provincia: ",(L=k.usuario())==null||L.ubicacion==null?null:L.ubicacion.provincia,""),l(2),m("Localidad: ",(z=k.usuario())==null||z.ubicacion==null?null:z.ubicacion.localidad,""),l(2),m("Barrio: ",($=k.usuario())==null||$.ubicacion==null?null:$.ubicacion.barrio,""),l(2),m("Direcci\xF3n: ",(et=k.usuario())==null||et.ubicacion==null?null:et.ubicacion.direccion,"")}}var Nt=(()=>{let o=class o{constructor(r){this.usuarioService=r,this.usuario=r.usuario}};o.\u0275fac=function(i){return new(i||o)(f(h))},o.\u0275cmp=S({type:o,selectors:[["app-home"]],standalone:!0,features:[M],decls:3,vars:1,consts:[[1,"main","content"]],template:function(i,n){i&1&&(d(0,"app-header"),a(1,"main",0),C(2,Zt,22,10),c()),i&2&&(l(2),u(2,n.usuario()?2:-1))},dependencies:[K]});let t=o;return t})();var Kt=(t,o)=>o.id;function Qt(t,o){if(t&1&&d(0,"img",9),t&2){let e=p();mt("src",e.imgUrl+"/"+(e.versionActual==null?null:e.versionActual.imagen),st),g("alt",(e.producto==null?null:e.producto.nombre)+" "+(e.versionActual==null?null:e.versionActual.nombre))}}function Xt(t,o){t&1&&d(0,"img",10)}function te(t,o){if(t&1&&d(0,"span"),t&2){let e=o.$index,r=p(2);x("active",e==r.iVersion)}}function ee(t,o){if(t&1){let e=O();a(0,"p",11),_("click",function(){y(e);let i=p();return A(i.changeVersion(-1))}),d(1,"fa-icon",12),c(),a(2,"p",13),_("click",function(){y(e);let i=p();return A(i.changeVersion(1))}),d(3,"fa-icon",12),c(),a(4,"div",14),I(5,te,1,2,"span",null,Kt),c()}if(t&2){let e=p();x("disabled",e.iVersion==0),l(),g("icon",e.iconChevron),l(),x("disabled",e.iVersion==e.getLength(e.producto==null?null:e.producto.versiones)-1),l(),g("icon",e.iconChevron),l(2),T(e.producto==null?null:e.producto.versiones)}}function ie(t,o){if(t&1&&(a(0,"p",5),s(1),F(2,"currency"),c()),t&2){let e=p();l(),m("",V(2,1,e.versionActual==null?null:e.versionActual.precio)," ARS")}}function oe(t,o){t&1&&(a(0,"p",15),s(1,"$****,**"),c())}var Ut=(()=>{let o=class o{constructor(r,i){this.cartService=r,this.usuarioService=i,this.iVersion=0,this.imgUrl=St,this.isLogin=this.usuarioService.isLogin(),this.iconChevron=Tt}ngOnChanges(r){r.producto&&(this.producto&&this.producto.versiones.sort((i,n)=>n.precio-i.precio),this.versionActual=this.producto?.versiones[this.iVersion])}changeVersion(r){r=this.iVersion+r,this.producto?.versiones&&r<this.producto.versiones.length&&r>=0&&(this.iVersion=r,this.versionActual=this.producto.versiones[this.iVersion])}hasMoreVersion(){return!!(this.producto?.versiones&&this.producto.versiones.length>1)}addToCart(r){this.cartService.addProducto(this.producto,r)}getLength(r){return r?.length||-1}};o.\u0275fac=function(i){return new(i||o)(f(J),f(h))},o.\u0275cmp=S({type:o,selectors:[["product-client-card"]],inputs:{producto:"producto"},standalone:!0,features:[W,M],decls:18,vars:7,consts:[[1,"product-card","box-shadow"],[1,"card-header"],[1,"card-body"],[1,"product-name"],[1,"product-description"],[1,"product-precio"],[1,"card-buttons"],[1,"btn"],[1,"btn","btn-primary",3,"click"],[3,"src","alt"],["src","assets/images/no-img.jpg","alt","versi\xF3n sin imagen"],[1,"prev-ver","cursor",3,"click"],[3,"icon"],[1,"next-ver","cursor",3,"click"],[1,"count-ver"],["title","El precio se podr\xE1 ver si inicias sesi\xF3n",1,"product-precio"]],template:function(i,n){i&1&&(a(0,"div",0)(1,"div",1),C(2,Qt,1,2,"img")(3,Xt,1,0)(4,ee,7,6),c(),a(5,"div",2)(6,"p",3),s(7),F(8,"titlecase"),c(),a(9,"p",4),s(10),c(),C(11,ie,3,3,"p",5)(12,oe,2,0),a(13,"div",6)(14,"button",7),s(15,"Ver Detalles"),c(),a(16,"button",8),_("click",function(){return n.addToCart(n.versionActual==null?null:n.versionActual.id)}),s(17,"Agregar al carrito"),c()()()()),i&2&&(l(2),u(2,(n.versionActual==null?null:n.versionActual.imagen)!=null?2:3),l(2),u(4,n.hasMoreVersion()?4:-1),l(3),w(V(8,5,(n.producto==null?null:n.producto.nombre)+" "+(n.versionActual==null?null:n.versionActual.nombre))),l(3),w(n.versionActual==null?null:n.versionActual.descripcion),l(),u(11,n.isLogin?11:12))},dependencies:[Z,Y,U,N],styles:[".product-card[_ngcontent-%COMP%]{display:grid;border-radius:var(--borderrLow);background-color:var(--bgCardColor);overflow:hidden;height:100%}.card-header[_ngcontent-%COMP%]{position:relative}.prev-ver[_ngcontent-%COMP%], .next-ver[_ngcontent-%COMP%]{position:absolute;bottom:.5rem;display:grid;place-items:center;width:2rem;height:2rem;font-weight:bolder;border-radius:50%;background-color:var(--bgColor);color:var(--mainColor);transition:var(--)}.prev-ver.disabled[_ngcontent-%COMP%], .next-ver.disabled[_ngcontent-%COMP%]{opacity:.3;pointer-events:none}.prev-ver[_ngcontent-%COMP%]{left:.5rem}.next-ver[_ngcontent-%COMP%]{right:.5rem;transform:rotate(180deg)}.count-ver[_ngcontent-%COMP%]{position:absolute;bottom:.5rem;left:50%;display:flex;gap:.5rem;padding:.2rem .5rem;border-radius:var(--borderrHigh);background-color:var(--bgCardColor);transform:translate(-50%)}.count-ver[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{width:.5rem;height:.5rem;border-radius:50%;background-color:var(--textAlphaColor);transition:.5s ease}.count-ver[_ngcontent-%COMP%]   span.active[_ngcontent-%COMP%]{background-color:var(--mainColor);transform:scale(1.5)}.card-body[_ngcontent-%COMP%]{align-self:stretch;display:grid;gap:.5rem;padding:0 .5rem .5rem}.product-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:150px;object-fit:cover;object-position:center}.product-name[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700}.card-buttons[_ngcontent-%COMP%]{align-self:end;display:flex;flex-direction:column;gap:.5rem}@media screen and (min-width: 600px){.product-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:270px}}"]});let t=o;return t})();var re=(t,o)=>o.id;function ae(t,o){if(t&1&&(a(0,"div",5)(1,"p",7),s(2),F(3,"titlecase"),c(),a(4,"p")(5,"b"),s(6,"Fecha de publicaci\xF3n:"),c(),s(7),F(8,"dateFormat"),c(),a(9,"p")(10,"b"),s(11,"En Stock:"),c(),s(12),c(),a(13,"p")(14,"b"),s(15,"Precio:"),c(),s(16),F(17,"currency"),c(),a(18,"p")(19,"b"),s(20,"Precio Reventa:"),c(),s(21),F(22,"currency"),c(),a(23,"p",8)(24,"b"),s(25,"Estado:"),c(),s(26),c(),a(27,"p")(28,"b"),s(29,"Tiene imagen:"),c(),s(30),c()()),t&2){let e=o.$implicit;x("noDisp",!e.estado),l(2),ut("",V(3,10,e.nombre)," ",e.estado?"":"(No disponible)",""),l(5),m(" ",V(8,12,e.fecha),""),l(5),m(" ",e.stock,""),l(4),m(" ",V(17,14,e.precio)," ARS"),l(5),m(" ",V(22,16,e.precioDescuento)," ARS"),l(5),m(" ",e.estado?"P\xFAblico":"Privado",""),l(4),m(" ",e.imagen?"SI":"NO","")}}function ce(t,o){t&1&&d(0,"app-loader")}function le(t,o){if(t&1){let e=O();a(0,"button",12),_("click",function(){y(e);let i=p(2);return A(i.onDesactivar())}),s(1,"DESACTIVAR PRODUCTO"),c()}}function se(t,o){if(t&1){let e=O();a(0,"button",13),_("click",function(){y(e);let i=p(2);return A(i.onActivar())}),s(1,"ACTIVAR PRODUCTO"),c()}}function de(t,o){if(t&1){let e=O();C(0,le,2,0,"button",9)(1,se,2,0,"button",10),a(2,"button",11),_("click",function(){y(e);let i=p();return A(i.actualizar())}),s(3,"ACTUALIZAR PRODUCTO"),c()}if(t&2){let e=p();u(0,e.producto!=null&&e.producto.estado?0:-1),l(),u(1,e.canActivate?1:-1)}}var Bt=(()=>{let o=class o{constructor(r,i){this.productoService=r,this.noti=i,this.cambioProducto=new lt,this.canActivate=!1,this.loading=!1}ngOnChanges(r){r.producto&&(this.canActivate=!this.producto?.estado&&this.producto?.versiones.some(i=>i.estado))}actualizar(){this.productoService.setProductoSelected(this.producto)}onActivar(){this.loading=!0,this.productoService.activateProduct(this.producto?.id,{all:!1}).subscribe({next:r=>{this.loading=!1,this.producto&&(this.producto.estado=!0,this.cambioProducto.emit({accion:"eliminar",elemento:this.producto})),it("/producto?estado=false","/producto?estado=true",this.producto)},error:r=>{this.loading=!1,r.error?.errors?r.error.errors.forEach(i=>{this.noti.notificate(i.error,{error:!0})}):this.noti.notificate("Ocurrio un error al activar el producto",{error:!0})}})}onDesactivar(){this.productoService.updateProducto(this.producto?.id,{estado:!1}).subscribe({next:r=>{this.loading=!1,this.producto&&(this.producto.estado=!1,this.cambioProducto.emit({accion:"eliminar",elemento:this.producto})),it("/producto?estado=true","/producto?estado=false",this.producto)},error:r=>{this.loading=!1,r.error?.errors?r.error.errors.forEach(i=>{this.noti.notificate(i.error,{error:!0})}):this.noti.notificate("Ocurrio un error al activar el producto",{error:!0})}})}};o.\u0275fac=function(i){return new(i||o)(f(X),f(E))},o.\u0275cmp=S({type:o,selectors:[["product-admin-card"]],inputs:{producto:"producto"},outputs:{cambioProducto:"cambioProducto"},standalone:!0,features:[W,M],decls:17,vars:9,consts:[[1,"product-card"],[1,"product-title"],[1,"product-versions"],[1,"version-title"],[1,"versions-container"],[1,"product-version"],[1,"product-actions"],[1,"version-name"],[1,"version-disp"],[1,"btn","btn-simple","red","cursor"],[1,"btn","btn-simple","cursor"],["routerLink","update",1,"btn","btn-simple","cursor",3,"click"],[1,"btn","btn-simple","red","cursor",3,"click"],[1,"btn","btn-simple","cursor",3,"click"]],template:function(i,n){i&1&&(a(0,"section",0)(1,"p",1),s(2),F(3,"titlecase"),c(),a(4,"p")(5,"b"),s(6,"Estado:"),c(),s(7),c(),a(8,"div",2)(9,"p",3),s(10,"Versiones"),c(),a(11,"div",4),I(12,ae,31,18,"div",5,re),c()(),a(14,"div",6),C(15,ce,1,0,"app-loader")(16,de,4,2),c()()),i&2&&(pt("view-transition-name: producto"+(n.producto==null?null:n.producto.id)+";"),l(2),w(V(3,7,n.producto==null?null:n.producto.nombre)),l(2),x("prodNoDisp",!(n.producto!=null&&n.producto.estado)),l(3),m(" ",n.producto!=null&&n.producto.estado?"P\xFAblico":"Privado",""),l(5),T(n.producto==null?null:n.producto.versiones),l(3),u(15,n.loading?15:16))},dependencies:[Y,Z,Lt,B,j,Q],styles:[".product-card[_ngcontent-%COMP%]{display:grid;gap:.5rem;padding:.5rem;border-radius:var(--borderrMid);background-color:var(--bgCardColor)}.product-title[_ngcontent-%COMP%]{font-size:1.2rem;text-align:center}.prodNoDisp[_ngcontent-%COMP%]{color:var(--errorColor)}.product-versions[_ngcontent-%COMP%]{display:grid;gap:.5rem;padding:.5rem;border-radius:var(--borderrMid);background-color:var(--bgColor)}.version-title[_ngcontent-%COMP%]{font-weight:700;grid-column:1 / span 100%}.versions-container[_ngcontent-%COMP%]{display:flex;gap:.5rem;border-radius:inherit;overflow:auto}.product-version[_ngcontent-%COMP%]{padding:.5rem;width:calc(100% - 1.5rem);flex-shrink:0;border-radius:inherit;background-color:var(--mainLowAlphaColor)}.product-version.noDisp[_ngcontent-%COMP%]{background-color:var(--errorAlphaLowColor)}.version-name[_ngcontent-%COMP%]{font-weight:700;text-align:center;color:var(--mainColor)}.product-version.noDisp[_ngcontent-%COMP%]   .version-name[_ngcontent-%COMP%]{color:var(--errorColor)}.product-version.noDisp[_ngcontent-%COMP%]   .version-disp[_ngcontent-%COMP%]{font-weight:700}.product-actions[_ngcontent-%COMP%]{display:grid}"]});let t=o;return t})();function pe(t,o){if(t&1){let e=O();a(0,"button",10),_("click",function(){y(e);let i=p(3);return A(i.loadMoreProducts(!1,!0))}),d(1,"fa-icon",9),a(2,"span"),s(3,"Ver Privados"),c()()}if(t&2){let e=p(3);l(),g("icon",e.iconTrash)}}function me(t,o){if(t&1){let e=O();a(0,"button",11),_("click",function(){y(e);let i=p(3);return A(i.loadMoreProducts(!0,!0))}),d(1,"fa-icon",9),a(2,"span"),s(3,"Ver P\xFAblicos"),c()()}if(t&2){let e=p(3);l(),g("icon",e.iconProd)}}function ue(t,o){if(t&1&&(a(0,"p"),s(1),c(),a(2,"div",6),C(3,pe,4,1,"button",7)(4,me,4,1),a(5,"a",8),d(6,"fa-icon",9),a(7,"span"),s(8,"Crear Producto"),c()()()),t&2){let e=p(2);l(),m("Aqu\xED estan los productos ",e.productosByEstado?"que todos los usuarios pueden ver":"que no estan disponibles al p\xFAblico","."),l(2),u(3,e.productosByEstado?3:4),l(3),g("icon",e.iconPlus)}}function fe(t,o){t&1&&(a(0,"p"),s(1,"Estos son los productos que tenemos disponible para ti"),c())}function ve(t,o){if(t&1&&(a(0,"h1",5),s(1),c(),C(2,ue,9,3)(3,fe,2,0)),t&2){let e=p();l(),m("\xA1Hola ",e.usuarioService.firstName,"!"),l(),u(2,e.isAdmin()?2:3)}}function Ce(t,o){t&1&&(a(0,"h1",5),s(1,"Lista de productos"),c())}function ge(t,o){if(t&1){let e=O();a(0,"product-admin-card",12),_("cambioProducto",function(i){y(e);let n=p(2);return A(n.onCambioChildrenProduct(i))}),c()}if(t&2){let e=o.$implicit;g("producto",e)}}function _e(t,o){if(t&1&&I(0,ge,1,1,"product-admin-card",null,G),t&2){let e=p();T(e.productos)}}function he(t,o){if(t&1&&d(0,"product-client-card",13),t&2){let e=o.$implicit;g("producto",e)}}function Pe(t,o){if(t&1&&I(0,he,1,1,"product-client-card",null,G),t&2){let e=p();T(e.productos)}}function xe(t,o){t&1&&d(0,"app-loader",4)}function be(t,o){t&1&&d(0,"app-cart")}var Ht=(()=>{let o=class o{constructor(r,i,n){this.productoService=r,this.usuarioService=i,this.noti=n,this.productosByEstado=!1,this.loading=!1,this.page=0,this.size=10,this.totalPage=0,this.iconTrash=Mt,this.iconProd=yt,this.iconPlus=kt,this.isLogin=i.isLogin,this.isAdmin=i.isAdmin}ngOnInit(){this.loading=!0,this.loadMoreProducts(!0,!0)}onCambioChildrenProduct(r){r.accion=="eliminar"&&(this.productos=this.productos?.filter(i=>i.id!==r.elemento.id))}loadMoreProducts(r,i){this.page=i?0:this.page,i&&(this.productosByEstado=!this.productosByEstado),this.productoService.getProductos({estado:r,page:this.page,sort:"ASC"}).subscribe({next:n=>{i?this.productos=n.body.content:this.productos=this.productos?.concat(n.body.content),this.totalPage=n.body.totalPages,this.page++,this.loading=!1},error:n=>{n.error?.errors?.length>0?n.error.errors.forEach(v=>{this.noti.notificate(v.error,{error:!0})}):this.noti.notificate("Ocurrio un error al cargar los productos",{error:!0}),this.loading=!1}})}controlScroll(){window.innerHeight+window.scrollY+1>=document.body.offsetHeight&&this.page<this.totalPage&&this.loadMoreProducts(this.productosByEstado,!1)}};o.\u0275fac=function(i){return new(i||o)(f(X),f(h),f(E))},o.\u0275cmp=S({type:o,selectors:[["app-products-page"]],hostBindings:function(i,n){i&1&&_("scroll",function(P){return n.controlScroll(P)},!1,dt)},standalone:!0,features:[M],decls:11,vars:4,consts:[[1,"main"],[1,"products-content","content"],[1,"line-separator"],[1,"product-cards"],["size","4rem"],[1,"title"],[1,"products-actions"],[1,"btn","btn-simple","cursor","red"],["routerLink","create",1,"btn","btn-simple","cursor"],[3,"icon"],[1,"btn","btn-simple","cursor","red",3,"click"],[1,"btn","btn-simple","cursor",3,"click"],[3,"cambioProducto","producto"],[3,"producto"]],template:function(i,n){i&1&&(d(0,"app-header"),a(1,"main",0)(2,"section",1),C(3,ve,4,2)(4,Ce,2,0),d(5,"div",2),a(6,"article",3),C(7,_e,2,0)(8,Pe,2,0)(9,xe,1,0,"app-loader",4),c()()(),C(10,be,1,0,"app-cart")),i&2&&(l(3),u(3,n.isLogin()?3:4),l(4),u(7,n.isAdmin()?7:8),l(2),u(9,n.loading?9:-1),l(),u(10,n.isLogin()?-1:10))},dependencies:[K,Ut,Vt,Bt,B,j,U,N,Q],styles:[".main[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{padding:1rem}.products-actions[_ngcontent-%COMP%]{display:flex;align-items:center;overflow:auto}.products-actions[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{flex-shrink:0}.product-cards[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(270px,1fr));gap:.5rem}.product-cards[_ngcontent-%COMP%]   app-loader[_ngcontent-%COMP%]{grid-column:1 / -1}@media screen and (min-width: 600px){.product-cards[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(270px,1fr))}}"]});let t=o;return t})();var R=(t,o)=>{let e=b(h),r=b(D),i=b(E);return e.isLogin()?!0:(r.navigate(["/login"]),i.notificate(`Para ingresar a la pagina '${o.url}' debes iniciar sesi\xF3n`,{time:1e4,error:!0}),!1)};var q=(t,o)=>{let e=b(h),r=b(D),i=b(E);return e.usuario()?.rol==="ADMIN"||e.usuario()?.rol==="SUPERADMIN"?!0:(r.navigate(["/productos"]),i.notificate(`No tienes los permisos necesarios para ingresar a la p\xE1gina '${o.url}'`,{time:1e4,error:!0}),!1)};var nt=(t,o)=>{let e=b(h),i=[["/login","iniciar sesi\xF3n"],["/signup","registrarte"]].find(n=>n[0]==o.url);return i&&e.isLogin()?(b(E).notificate(`No puedes ${i[1]} porque tienes una sesi\xF3n abierta.`,{time:1e4,error:!0}),!1):!0};var zt=[{path:"",component:Nt,title:"Inicio"},{path:"productos",component:Ht,title:"Productos"},{path:"productos/:action",loadComponent:()=>import("./chunk-U2NUVJQA.js").then(t=>t.CreateProductPageComponent),title:"Crear Producto",canActivate:[R,q]},{path:"productos/versiones/images",loadComponent:()=>import("./chunk-2PKXHLCY.js").then(t=>t.UploadImagePageComponent),title:"Subir imagenes",canActivate:[R,q]},{path:"login",loadComponent:()=>import("./chunk-JXQ5I4SP.js").then(t=>t.LoginComponent),title:"Iniciar Sesi\xF3n",canActivate:[nt]},{path:"signup",loadComponent:()=>import("./chunk-4E4YAUM5.js").then(t=>t.SignupComponent),title:"Registrarse",canActivate:[nt]},{path:"cart",loadComponent:()=>import("./chunk-TWAV274G.js").then(t=>t.CartPageComponent),title:"Pedidos",canActivate:[R]},{path:"cart/update",loadComponent:()=>import("./chunk-YQDYSAUH.js").then(t=>t.UpdatePageComponent),canActivate:[R]},{path:"cart/confirm",loadComponent:()=>import("./chunk-7JLFUGGE.js").then(t=>t.ConfirmPageComponent),title:"Confirmar Pedido",canActivate:[R,q]},{path:"dashboard",loadComponent:()=>import("./chunk-UHQX3MAM.js").then(t=>t.DashboardPageComponent),canActivate:[R,q]},{path:"**",loadComponent:()=>import("./chunk-B2DTXR2Z.js").then(t=>t.ErrorPageComponent),title:"Error"}];var $t=(t,o)=>{let e=localStorage.getItem("userToken");if(e){let r=b(D),i=b(h),n=b(E),v=t.clone({headers:t.headers.set("Authorization",`Bearer ${e}`)});return o(v).pipe(ct(P=>P.status===401&&P.error.errors[0].error.startsWith("El token de autenticaci\xF3n ha expirado")?(n.notificate(`El inicio de sesi\xF3n ha expirado hace ${P.error.errors[0].error.split("hace ")[1]}. Inicia nuevamente.`,{time:1e4,error:!0}),i.logout(),rt):at(P)))}return o(t)};var Gt={providers:[xt(zt,bt({skipInitialTransition:!0})),vt(Ct([$t,Dt]))]};function Se(t,o){if(t&1&&(a(0,"span",5),s(1),c()),t&2){let e=p();l(),w(e.totalUnidades>=100?"+99":e.totalUnidades)}}function Me(t,o){if(t&1&&(a(0,"a",6),d(1,"fa-icon",2),a(2,"span"),s(3,"Tablero"),c()()),t&2){let e=p();l(),g("icon",e.iconDashboard)}}function Ee(t,o){if(t&1&&(a(0,"a",6),d(1,"fa-icon",2),a(2,"span"),s(3,"Estadisticas"),c()()),t&2){let e=p();l(),g("icon",e.iconMetrics)}}var qt=(()=>{let o=class o{constructor(r,i,n){this.usuarioService=r,this.cartService=i,this.router=n,this.iconShop=At,this.iconPedidos=Ot,this.iconDashboard=wt,this.iconMetrics=Et,this.iconConfig=Ft,this.totalUnidades=0,this.hidden=!1,this.usuario=r.usuario,this.cartService.cart.subscribe(v=>{this.totalUnidades=v.reduce((P,L)=>P+L.versiones.reduce((z,$)=>z+$.cantidad,0),0)}),this.router.events.subscribe(v=>{v instanceof _t&&this.controlHidden(v.url)})}controlHidden(r){let i=["/cart/update","/productos/update","/productos/create","/productos/versiones/images","/cart/confirm"];this.hidden=i.find(n=>r.startsWith(n))!==void 0}};o.\u0275fac=function(i){return new(i||o)(f(h),f(J),f(D))},o.\u0275cmp=S({type:o,selectors:[["user-nav"]],standalone:!0,features:[M],decls:17,vars:9,consts:[[1,"user-nav"],["routerLink","/productos","routerLinkActive","active",1,"nav-item","cursor"],[3,"icon"],["routerLink","/cart","routerLinkActive","active",1,"nav-item","cursor"],[1,"nav-item-icon"],[1,"totalUnidades"],[1,"nav-item","cursor"]],template:function(i,n){if(i&1&&(a(0,"nav",0)(1,"a",1),d(2,"fa-icon",2),a(3,"span"),s(4,"Tienda"),c()(),a(5,"a",3)(6,"span",4),d(7,"fa-icon",2),C(8,Se,2,1,"span",5),c(),a(9,"span"),s(10),c()(),C(11,Me,4,1,"a",6)(12,Ee,4,1,"a",6),a(13,"a",6),d(14,"fa-icon",2),a(15,"span"),s(16,"Ajustes"),c()()()),i&2){let v,P,L;x("hidden",n.hidden),l(2),g("icon",n.iconShop),l(5),g("icon",n.iconPedidos),l(),u(8,n.totalUnidades>0?8:-1),l(2),w(((v=n.usuario())==null?null:v.rol)=="USUARIO"?"Mis Pedidos":"Pedidos"),l(),u(11,((P=n.usuario())==null?null:P.rol)==="SUPERADMIN"||((P=n.usuario())==null?null:P.rol)==="ADMIN"?11:-1),l(),u(12,((L=n.usuario())==null?null:L.rol)==="SUPERADMIN"?12:-1),l(2),g("icon",n.iconConfig)}},dependencies:[B,j,Pt,U,N],styles:[".user-nav[_ngcontent-%COMP%]:not(.hidden){position:fixed;bottom:.5rem;left:50%;transform:translate(-50%);display:flex;justify-content:space-between;align-items:center;gap:1rem;padding:.5rem 1rem;width:calc(100% - 2rem);max-width:400px;min-height:var(--headerHeight);box-shadow:0 0 5px 0 var(--textAlphaColor);background-color:var(--bgCardColor);border-radius:var(--borderrMid)}.nav-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;font-size:1.3rem;color:var(--textColor)}.nav-item.active[_ngcontent-%COMP%]{font-weight:700;color:var(--mainColor)}.nav-item-icon[_ngcontent-%COMP%]{position:relative}.nav-item[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]:not(.nav-item-icon){font-size:.8rem;text-align:center;transition:var(--transitionFast)}.nav-item.active[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]:not(.nav-item-icon){font-size:1rem}.totalUnidades[_ngcontent-%COMP%]{position:absolute;top:-.4rem;left:90%;display:grid;place-items:center;padding:0 .2rem;min-width:.9rem;height:.9rem;font-size:.6rem;font-weight:700;border-radius:var(--borderrHigh);background-color:var(--mainColor);color:var(--bgCardColor)}"]});let t=o;return t})();function ye(t,o){if(t&1){let e=O();a(0,"div",1)(1,"span",11),_("click",function(){y(e);let i=p();return A(i.close())}),d(2,"fa-icon",5),c(),a(3,"p",12),s(4),c()()}if(t&2){let e=o.$implicit,r=p();x("active",e!==null)("error",e.error),l(),x("hidden",(e==null?null:e.time)!==0),l(),g("icon",r.iconClose),l(2),w(e==null?null:e.message)}}var Wt=(()=>{let o=class o{constructor(r){this.notificationService=r,this.notifications=[],this.iconClose=It,this.modal=null,r.notifications.subscribe(i=>{this.notifications=i}),r.modal.subscribe(i=>this.modal=i)}close(){this.notificationService.closeNotification()}cancelModal(){this.notificationService.rejectModal(),this.notificationService.closeModal()}confirmModal(){this.notificationService.confirmModal(),this.notificationService.closeModal()}};o.\u0275fac=function(i){return new(i||o)(f(E))},o.\u0275cmp=S({type:o,selectors:[["app-notification"]],standalone:!0,features:[M],decls:17,vars:11,consts:[[1,"notification-container"],[1,"notification","no-close-others"],[1,"modal-container","no-close-others"],[1,"modal"],[1,"modal-close","cursor",3,"click"],[3,"icon"],[1,"modal-body"],[1,"modal-title"],[1,"modal-desc"],[1,"modal-actions"],[1,"btn","btn-simple","cursor",3,"click"],[1,"close","cursor",3,"click"],[1,"message"]],template:function(i,n){i&1&&(a(0,"div",0),I(1,ye,5,8,"div",1,G),c(),a(3,"div",2)(4,"div",3)(5,"span",4),_("click",function(){return n.cancelModal()}),d(6,"fa-icon",5),c(),a(7,"div",6)(8,"p",7),s(9),c(),a(10,"p",8),s(11),c()(),a(12,"div",9)(13,"button",10),_("click",function(){return n.cancelModal()}),s(14,"CANCELAR"),c(),a(15,"button",10),_("click",function(){return n.confirmModal()}),s(16,"CONFIRMAR"),c()()()()),i&2&&(x("open",n.notifications.length>0),l(),T(n.notifications),l(2),x("open",n.modal!=null),l(3),g("icon",n.iconClose),l(3),w(n.modal==null?null:n.modal.title),l(2),w(n.modal==null?null:n.modal.desc),l(2),x("red",n.modal==null?null:n.modal.motivate),l(2),x("neutro",(n.modal==null?null:n.modal.motivate)==!1))},dependencies:[U,N],styles:[".notification-container[_ngcontent-%COMP%]{position:fixed;top:-100%;left:50%;display:grid;gap:.5rem;width:calc(100% - 2rem);min-width:150px;max-width:500px;transform:translate(-50%);transition:var(--transitionFast);opacity:0;overflow:hidden;pointer-events:none}.notification-container.open[_ngcontent-%COMP%]{top:calc(var(--headerHeight) + 1rem);opacity:1;pointer-events:all}.notification[_ngcontent-%COMP%]{padding:.5rem 2rem;border-radius:var(--borderrLow);background-color:var(--greyAlphaColor);transition:var(--transitionFast);color:var(--bgCardColor);z-index:1100}.notification.error[_ngcontent-%COMP%]{background-color:var(--errorAlphaColor)}.message[_ngcontent-%COMP%]{font-weight:700;text-align:center}.close[_ngcontent-%COMP%]{position:absolute;top:.3rem;right:.3rem;font-size:.8rem;color:var(--bgColor)}.modal-container[_ngcontent-%COMP%]{position:fixed;inset:0;display:grid;place-items:center;background-color:var(--greyAlphaColor);transition:var(--transitionFast);overflow:hidden;opacity:0;z-index:1100;pointer-events:none}.modal-container.open[_ngcontent-%COMP%]{opacity:1;pointer-events:all}.modal[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:column;gap:1rem;padding:1rem;width:calc(100% - 2rem);max-width:500px;border-radius:var(--borderrHigh);background-color:var(--bgCardColor);transform:scale(0);overflow:hidden;transition:var(--transitionFast)}.modal-container.open[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]{transform:scale(1)}.modal-close[_ngcontent-%COMP%]{position:absolute;top:.5rem;right:1rem;font-size:1.5rem}.modal-body[_ngcontent-%COMP%]{display:grid;gap:1rem}.modal-title[_ngcontent-%COMP%]{font-size:1.5rem}.modal-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}"]});let t=o;return t})();function Ae(t,o){t&1&&d(0,"user-nav")}var Yt=(()=>{let o=class o{constructor(r){this.usuarioService=r,this.isLoggin=r.isLogin}};o.\u0275fac=function(i){return new(i||o)(f(h))},o.\u0275cmp=S({type:o,selectors:[["app-root"]],standalone:!0,features:[M],decls:3,vars:1,template:function(i,n){i&1&&(d(0,"router-outlet"),C(1,Ae,1,0,"user-nav"),d(2,"app-notification")),i&2&&(l(),u(1,n.isLoggin()?1:-1))},dependencies:[ft,ht,qt,Wt]});let t=o;return t})();gt(Yt,Gt).catch(t=>console.error(t));
